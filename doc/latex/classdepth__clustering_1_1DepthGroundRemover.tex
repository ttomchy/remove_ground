\hypertarget{classdepth__clustering_1_1DepthGroundRemover}{\section{depth\-\_\-clustering\-:\-:Depth\-Ground\-Remover Class Reference}
\label{classdepth__clustering_1_1DepthGroundRemover}\index{depth\-\_\-clustering\-::\-Depth\-Ground\-Remover@{depth\-\_\-clustering\-::\-Depth\-Ground\-Remover}}
}


A class to remove ground based upon depth image.  




{\ttfamily \#include $<$depth\-\_\-ground\-\_\-remover.\-h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classdepth__clustering_1_1DepthGroundRemover_aae9816017a747246c495de41bcece02c}{{\bfseries Depth\-Ground\-Remover} (const \hyperlink{classdepth__clustering_1_1ProjectionParams}{Projection\-Params} \&params, const Radians \&ground\-\_\-remove\-\_\-angle, int window\-\_\-size=5)}\label{classdepth__clustering_1_1DepthGroundRemover_aae9816017a747246c495de41bcece02c}

\item 
void \hyperlink{classdepth__clustering_1_1DepthGroundRemover_ab2c3bcc8df6cc70ad5057f5ec3bd074f}{On\-New\-Object\-Received} (const \hyperlink{classdepth__clustering_1_1Cloud}{Cloud} \&cloud, const int sender\-\_\-id) override
\begin{DoxyCompactList}\small\item\em when someone sends us an object we process it \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
cv\-::\-Mat \hyperlink{classdepth__clustering_1_1DepthGroundRemover_a0f3733c1cbc915600d255246b1dccce0}{Zero\-Out\-Ground} (const cv\-::\-Mat \&image, const cv\-::\-Mat \&angle\-\_\-image, const Radians \&threshold) const 
\begin{DoxyCompactList}\small\item\em Zero out all pixels that belong to ground 去除掉所有属于地面的点。 \end{DoxyCompactList}\item 
\hypertarget{classdepth__clustering_1_1DepthGroundRemover_a3364e716dc72e6dc2a5d37d6c670a235}{cv\-::\-Mat {\bfseries Zero\-Out\-Ground\-B\-F\-S} (const cv\-::\-Mat \&image, const cv\-::\-Mat \&angle\-\_\-image, const Radians \&threshold, int kernel\-\_\-size) const }\label{classdepth__clustering_1_1DepthGroundRemover_a3364e716dc72e6dc2a5d37d6c670a235}

\item 
cv\-::\-Mat \hyperlink{classdepth__clustering_1_1DepthGroundRemover_af533c51a44aad9a56c12445b61b801b9}{Create\-Angle\-Image} (const cv\-::\-Mat \&depth\-\_\-image)
\begin{DoxyCompactList}\small\item\em create a help image with angle in radians written for each pixel 创建一个帮助图像，角度以弧度为单位编写像素 \end{DoxyCompactList}\item 
cv\-::\-Mat \hyperlink{classdepth__clustering_1_1DepthGroundRemover_a8b660a1be94b529cf2554b8f72aee30d}{Get\-Savitsky\-Golay\-Kernel} (int window\-\_\-size) const 
\begin{DoxyCompactList}\small\item\em Get kernel for Savitsky-\/\-Golay filter为了 滤波器 \end{DoxyCompactList}\item 
\hypertarget{classdepth__clustering_1_1DepthGroundRemover_af3c60a97dd0cca8847e40c86ee11c037}{cv\-::\-Mat {\bfseries Get\-Uniform\-Kernel} (int window\-\_\-size, int \hyperlink{classdepth__clustering_1_1AbstractSender_ad9da304185f766eb4b0035d6610caa49}{type}=C\-V\-\_\-32\-F) const }\label{classdepth__clustering_1_1DepthGroundRemover_af3c60a97dd0cca8847e40c86ee11c037}

\item 
cv\-::\-Mat \hyperlink{classdepth__clustering_1_1DepthGroundRemover_a63b32fa801a13021bf22699525579f8b}{Apply\-Savitsky\-Golay\-Smoothing} (const cv\-::\-Mat \&column, int window\-\_\-size)
\begin{DoxyCompactList}\small\item\em Apply Savitsky-\/\-Golay smoothing to a column. \end{DoxyCompactList}\item 
Radians \hyperlink{classdepth__clustering_1_1DepthGroundRemover_a29ba07a101794aab322ae3c0671806e0}{Get\-Line\-Angle} (const cv\-::\-Mat \&depth\-\_\-image, int col, int row\-\_\-curr, int row\-\_\-neigh)
\begin{DoxyCompactList}\small\item\em Get line angle. \end{DoxyCompactList}\item 
cv\-::\-Mat \hyperlink{classdepth__clustering_1_1DepthGroundRemover_a51dd313ed1bdda2188fb3a3fa1c5738e}{Repair\-Depth} (const cv\-::\-Mat \&no\-\_\-ground\-\_\-image, int step, float depth\-\_\-threshold)
\begin{DoxyCompactList}\small\item\em Repair zeros in the depth image. \end{DoxyCompactList}\item 
\hypertarget{classdepth__clustering_1_1DepthGroundRemover_ab44815e8ea8b10abce24faebf8322624}{cv\-::\-Mat {\bfseries Repair\-Depth} (const cv\-::\-Mat \&depth\-\_\-image)}\label{classdepth__clustering_1_1DepthGroundRemover_ab44815e8ea8b10abce24faebf8322624}

\item 
\hypertarget{classdepth__clustering_1_1DepthGroundRemover_a37cd0a7054c51343f6a25f269890fae2}{void {\bfseries Write\-Data} (cv\-::\-Mat \&m, const char $\ast$filename)}\label{classdepth__clustering_1_1DepthGroundRemover_a37cd0a7054c51343f6a25f269890fae2}

\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classdepth__clustering_1_1DepthGroundRemover_ad4ff83331f7ad6a3bbb22ce5356471ed}{\hyperlink{classdepth__clustering_1_1ProjectionParams}{Projection\-Params} {\bfseries \-\_\-params}}\label{classdepth__clustering_1_1DepthGroundRemover_ad4ff83331f7ad6a3bbb22ce5356471ed}

\item 
\hypertarget{classdepth__clustering_1_1DepthGroundRemover_a44a1a7778c4913540c9fd3545671ee96}{int {\bfseries \-\_\-window\-\_\-size} = 5}\label{classdepth__clustering_1_1DepthGroundRemover_a44a1a7778c4913540c9fd3545671ee96}

\item 
\hypertarget{classdepth__clustering_1_1DepthGroundRemover_a6acd966842064c50552cfd3857652cd8}{Radians {\bfseries \-\_\-ground\-\_\-remove\-\_\-angle} = 5\-\_\-deg}\label{classdepth__clustering_1_1DepthGroundRemover_a6acd966842064c50552cfd3857652cd8}

\item 
\hypertarget{classdepth__clustering_1_1DepthGroundRemover_a1d27a305647b5315b1c2a46c4b0a3039}{float {\bfseries \-\_\-eps} = 0.\-001f}\label{classdepth__clustering_1_1DepthGroundRemover_a1d27a305647b5315b1c2a46c4b0a3039}

\item 
\hypertarget{classdepth__clustering_1_1DepthGroundRemover_a5230ebdee643d0e76c86486adf70db5d}{int {\bfseries \-\_\-counter} = 0}\label{classdepth__clustering_1_1DepthGroundRemover_a5230ebdee643d0e76c86486adf70db5d}

\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
A class to remove ground based upon depth image. 

Given a depth image and image config this class should remove the ground and send the new depth image with no ground further through the pipeline to its clients.


\begin{DoxyParams}{Parameters}
{\em params} & projection params \\
\hline
\end{DoxyParams}


Inheritance diagram for depth\-\_\-clustering\-:\-:Depth\-Ground\-Remover\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classdepth__clustering_1_1DepthGroundRemover__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for depth\-\_\-clustering\-:\-:Depth\-Ground\-Remover\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classdepth__clustering_1_1DepthGroundRemover__coll__graph}
\end{center}
\end{figure}


\subsection{Member Function Documentation}
\hypertarget{classdepth__clustering_1_1DepthGroundRemover_a63b32fa801a13021bf22699525579f8b}{\index{depth\-\_\-clustering\-::\-Depth\-Ground\-Remover@{depth\-\_\-clustering\-::\-Depth\-Ground\-Remover}!Apply\-Savitsky\-Golay\-Smoothing@{Apply\-Savitsky\-Golay\-Smoothing}}
\index{Apply\-Savitsky\-Golay\-Smoothing@{Apply\-Savitsky\-Golay\-Smoothing}!depth_clustering::DepthGroundRemover@{depth\-\_\-clustering\-::\-Depth\-Ground\-Remover}}
\subsubsection[{Apply\-Savitsky\-Golay\-Smoothing}]{\setlength{\rightskip}{0pt plus 5cm}Mat depth\-\_\-clustering\-::\-Depth\-Ground\-Remover\-::\-Apply\-Savitsky\-Golay\-Smoothing (
\begin{DoxyParamCaption}
\item[{const cv\-::\-Mat \&}]{column, }
\item[{int}]{window\-\_\-size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classdepth__clustering_1_1DepthGroundRemover_a63b32fa801a13021bf22699525579f8b}


Apply Savitsky-\/\-Golay smoothing to a column. 


\begin{DoxyParams}{Parameters}
{\em column} & \mbox{[}A column of an angle image\mbox{]} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\mbox{[}a smoothed column\mbox{]} 
\end{DoxyReturn}
\hypertarget{classdepth__clustering_1_1DepthGroundRemover_af533c51a44aad9a56c12445b61b801b9}{\index{depth\-\_\-clustering\-::\-Depth\-Ground\-Remover@{depth\-\_\-clustering\-::\-Depth\-Ground\-Remover}!Create\-Angle\-Image@{Create\-Angle\-Image}}
\index{Create\-Angle\-Image@{Create\-Angle\-Image}!depth_clustering::DepthGroundRemover@{depth\-\_\-clustering\-::\-Depth\-Ground\-Remover}}
\subsubsection[{Create\-Angle\-Image}]{\setlength{\rightskip}{0pt plus 5cm}Mat depth\-\_\-clustering\-::\-Depth\-Ground\-Remover\-::\-Create\-Angle\-Image (
\begin{DoxyParamCaption}
\item[{const cv\-::\-Mat \&}]{depth\-\_\-image}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classdepth__clustering_1_1DepthGroundRemover_af533c51a44aad9a56c12445b61b801b9}


create a help image with angle in radians written for each pixel 创建一个帮助图像，角度以弧度为单位编写像素 


\begin{DoxyParams}{Parameters}
{\em depth\-\_\-image} & \mbox{[}input depth image\mbox{]} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\mbox{[}32 bit float image with angle in radians written in every pixel\mbox{]} 
\end{DoxyReturn}
\hypertarget{classdepth__clustering_1_1DepthGroundRemover_a29ba07a101794aab322ae3c0671806e0}{\index{depth\-\_\-clustering\-::\-Depth\-Ground\-Remover@{depth\-\_\-clustering\-::\-Depth\-Ground\-Remover}!Get\-Line\-Angle@{Get\-Line\-Angle}}
\index{Get\-Line\-Angle@{Get\-Line\-Angle}!depth_clustering::DepthGroundRemover@{depth\-\_\-clustering\-::\-Depth\-Ground\-Remover}}
\subsubsection[{Get\-Line\-Angle}]{\setlength{\rightskip}{0pt plus 5cm}Radians depth\-\_\-clustering\-::\-Depth\-Ground\-Remover\-::\-Get\-Line\-Angle (
\begin{DoxyParamCaption}
\item[{const cv\-::\-Mat \&}]{depth\-\_\-image, }
\item[{int}]{col, }
\item[{int}]{row\-\_\-curr, }
\item[{int}]{row\-\_\-neigh}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classdepth__clustering_1_1DepthGroundRemover_a29ba07a101794aab322ae3c0671806e0}


Get line angle. 

Given two depth values and their angles compute the angle of the line that they spawn in the sensor frame.


\begin{DoxyParams}{Parameters}
{\em depth\-\_\-image} & \mbox{[}32 bit float image\mbox{]} \\
\hline
{\em col} & \mbox{[}current column\mbox{]} \\
\hline
{\em row\-\_\-curr} & \mbox{[}current row\mbox{]} \\
\hline
{\em row\-\_\-neigh} & \mbox{[}neighbor row\mbox{]} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\mbox{[}angle of the line\mbox{]} 
\end{DoxyReturn}
\hypertarget{classdepth__clustering_1_1DepthGroundRemover_a8b660a1be94b529cf2554b8f72aee30d}{\index{depth\-\_\-clustering\-::\-Depth\-Ground\-Remover@{depth\-\_\-clustering\-::\-Depth\-Ground\-Remover}!Get\-Savitsky\-Golay\-Kernel@{Get\-Savitsky\-Golay\-Kernel}}
\index{Get\-Savitsky\-Golay\-Kernel@{Get\-Savitsky\-Golay\-Kernel}!depth_clustering::DepthGroundRemover@{depth\-\_\-clustering\-::\-Depth\-Ground\-Remover}}
\subsubsection[{Get\-Savitsky\-Golay\-Kernel}]{\setlength{\rightskip}{0pt plus 5cm}Mat depth\-\_\-clustering\-::\-Depth\-Ground\-Remover\-::\-Get\-Savitsky\-Golay\-Kernel (
\begin{DoxyParamCaption}
\item[{int}]{window\-\_\-size}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}}}\label{classdepth__clustering_1_1DepthGroundRemover_a8b660a1be94b529cf2554b8f72aee30d}


Get kernel for Savitsky-\/\-Golay filter为了 滤波器 

Get a column filter to process an image filled with data with Savitsky-\/\-Golay filter


\begin{DoxyParams}{Parameters}
{\em window\-\_\-size} & size of the kernel \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
column Mat kernel 
\end{DoxyReturn}
\hypertarget{classdepth__clustering_1_1DepthGroundRemover_ab2c3bcc8df6cc70ad5057f5ec3bd074f}{\index{depth\-\_\-clustering\-::\-Depth\-Ground\-Remover@{depth\-\_\-clustering\-::\-Depth\-Ground\-Remover}!On\-New\-Object\-Received@{On\-New\-Object\-Received}}
\index{On\-New\-Object\-Received@{On\-New\-Object\-Received}!depth_clustering::DepthGroundRemover@{depth\-\_\-clustering\-::\-Depth\-Ground\-Remover}}
\subsubsection[{On\-New\-Object\-Received}]{\setlength{\rightskip}{0pt plus 5cm}void depth\-\_\-clustering\-::\-Depth\-Ground\-Remover\-::\-On\-New\-Object\-Received (
\begin{DoxyParamCaption}
\item[{const {\bf Cloud} \&}]{cloud, }
\item[{const int}]{sender\-\_\-id}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}}\label{classdepth__clustering_1_1DepthGroundRemover_ab2c3bcc8df6cc70ad5057f5ec3bd074f}


when someone sends us an object we process it 

receiving a depth image we remove ground from it and send to next recepient 当接收到一个物体时我们首先对他们进行处理 然后把他发送给下一个接收者


\begin{DoxyParams}{Parameters}
{\em depth\-\_\-image} & 32 bit depth image 32位的深度图像 \\
\hline
{\em sender\-\_\-id} & id of the sender 传感器的\-I\-D 号 \\
\hline
\end{DoxyParams}


Implements \hyperlink{classdepth__clustering_1_1AbstractClient}{depth\-\_\-clustering\-::\-Abstract\-Client$<$ Cloud $>$}.

\hypertarget{classdepth__clustering_1_1DepthGroundRemover_a51dd313ed1bdda2188fb3a3fa1c5738e}{\index{depth\-\_\-clustering\-::\-Depth\-Ground\-Remover@{depth\-\_\-clustering\-::\-Depth\-Ground\-Remover}!Repair\-Depth@{Repair\-Depth}}
\index{Repair\-Depth@{Repair\-Depth}!depth_clustering::DepthGroundRemover@{depth\-\_\-clustering\-::\-Depth\-Ground\-Remover}}
\subsubsection[{Repair\-Depth}]{\setlength{\rightskip}{0pt plus 5cm}cv\-::\-Mat depth\-\_\-clustering\-::\-Depth\-Ground\-Remover\-::\-Repair\-Depth (
\begin{DoxyParamCaption}
\item[{const cv\-::\-Mat \&}]{no\-\_\-ground\-\_\-image, }
\item[{int}]{step, }
\item[{float}]{depth\-\_\-threshold}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classdepth__clustering_1_1DepthGroundRemover_a51dd313ed1bdda2188fb3a3fa1c5738e}


Repair zeros in the depth image. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em depth\-\_\-image} & The depth image\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
depth image with repaired values 
\end{DoxyReturn}
\hypertarget{classdepth__clustering_1_1DepthGroundRemover_a0f3733c1cbc915600d255246b1dccce0}{\index{depth\-\_\-clustering\-::\-Depth\-Ground\-Remover@{depth\-\_\-clustering\-::\-Depth\-Ground\-Remover}!Zero\-Out\-Ground@{Zero\-Out\-Ground}}
\index{Zero\-Out\-Ground@{Zero\-Out\-Ground}!depth_clustering::DepthGroundRemover@{depth\-\_\-clustering\-::\-Depth\-Ground\-Remover}}
\subsubsection[{Zero\-Out\-Ground}]{\setlength{\rightskip}{0pt plus 5cm}Mat depth\-\_\-clustering\-::\-Depth\-Ground\-Remover\-::\-Zero\-Out\-Ground (
\begin{DoxyParamCaption}
\item[{const cv\-::\-Mat \&}]{image, }
\item[{const cv\-::\-Mat \&}]{angle\-\_\-image, }
\item[{const Radians \&}]{threshold}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}}}\label{classdepth__clustering_1_1DepthGroundRemover_a0f3733c1cbc915600d255246b1dccce0}


Zero out all pixels that belong to ground 去除掉所有属于地面的点。 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em image} & Input depth image 输入图像 \\
\hline
\mbox{\tt in}  & {\em angle\-\_\-image} & The angle image 角度图像 \\
\hline
\mbox{\tt in}  & {\em threshold} & angle threshold 角度阈值\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
depth image with 0 instead of ground pixels 返回的图像中已经完全不含有地面上面的像素点了。 
\end{DoxyReturn}


The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
/home/hadoop/chy/depth\-\_\-clustering-\/master234/src/ground\-\_\-removal/depth\-\_\-ground\-\_\-remover.\-h\item 
/home/hadoop/chy/depth\-\_\-clustering-\/master234/src/ground\-\_\-removal/depth\-\_\-ground\-\_\-remover.\-cpp\end{DoxyCompactItemize}
